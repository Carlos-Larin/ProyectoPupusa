<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pupusería Juan Pérez</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #b410e8;
            color: #FFF;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        .container {
            background-color: #FFB800;
            padding: 20px;
            width: 300px;
            border-radius: 8px;
            text-align: center;
        }
        .container input, .container select, .container button {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            border-radius: 4px;
            border: none;
            outline: none;
        }
        .container button {
            background-color: #333;
            color: #FFF;
            cursor: pointer;
        }
        .container button:hover {
            background-color: #555;
        }
    </style>
</head>
<body>

<div class="container">
    <h2>Pupusería Juan Pérez</h2>
    <form method="POST" action="/pagos/">
    {% csrf_token %}
    
    <label>De qué sabores son las Pupusas</label>
    <div id="pupusaContainer">
        <div class="pupusa-item">
            <select name="tipoPupusa[]" onchange="calcularTotal()">
                <option value="0.35">Frijol $0.35</option>
                <option value="0.50">Queso $0.50</option>
                <option value="0.75">Revuelta $0.75</option>
            </select>
            <input type="number" name="cantidadPupusas[]" placeholder="Cantidad" min="1" onchange="calcularTotal()">
        </div>
    </div>
    <button type="button" onclick="agregarPupusa()">Añadir otro sabor</button>

    <label for="tipoBebida">Bebida</label>
    <select id="tipoBebida" name="tipoBebida" onchange="calcularTotal()">
        <option value="0">Sin bebida</option>
        <option value="0.25">Bolsa con agua $0.25</option>
        <option value="0.50">Refresco $0.50</option>
        <option value="1.00">Jugo Natural $1.00</option>
    </select>
    <input type="number" id="cantidadBebidas" name="cantidadBebidas" placeholder="Cantidad" min="0" onchange="calcularTotal()">
    
    <input type="email" id="correoCliente" name="correoCliente" placeholder="Dirección de correo cliente">
    
    <div>
        <label>Cuenta:</label>
        <span id="cuenta">$0.00</span>
    </div>
    
    <input type="number" id="pagaCon" name="pagaCon" placeholder="Paga con" min="0" onchange="calcularTotal()">
    
    <div>
        <label>Total:</label>
        <span id="total">$0.00</span>
    </div>
    
    <button type="submit">Enviar Recibo</button>
    </form>
</div>

<script>
    function agregarPupusa() {
        const pupusaContainer = document.getElementById("pupusaContainer");
        const pupusaItem = document.createElement("div");
        pupusaItem.classList.add("pupusa-item");
        pupusaItem.innerHTML = 
            <select name="tipoPupusa[]" onchange="calcularTotal()">
                <option value="0.35">Frijol $0.35</option>
                <option value="0.50">Queso $0.50</option>
                <option value="0.75">Revuelta $0.75</option>
            </select>
            <input type="number" name="cantidadPupusas[]" placeholder="Cantidad" min="1" onchange="calcularTotal()">
        ;
        pupusaContainer.appendChild(pupusaItem);
    }

    function calcularTotal() {
        const tipoPupusaElems = document.getElementsByName("tipoPupusa[]");
        const cantidadPupusaElems = document.getElementsByName("cantidadPupusas[]");
        let cuenta = 0;
        
        for (let i = 0; i < tipoPupusaElems.length; i++) {
            const precioPupusa = parseFloat(tipoPupusaElems[i].value);
            const cantidadPupusas = parseInt(cantidadPupusaElems[i].value) || 0;
            cuenta += precioPupusa * cantidadPupusas;
        }

        const precioBebida = parseFloat(document.getElementById("tipoBebida").value);
        const cantidadBebidas = parseInt(document.getElementById("cantidadBebidas").value) || 0;
        cuenta += precioBebida * cantidadBebidas;

        const pagaCon = parseFloat(document.getElementById("pagaCon").value) || 0;
        document.getElementById("cuenta").textContent = `$${cuenta.toFixed(2)}`;
        document.getElementById("total").textContent = `$${(pagaCon - cuenta).toFixed(2)}`;
    }
</script>

</body>
</html>
